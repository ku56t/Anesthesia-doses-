<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªØ®Ø¯ÙŠØ±</title>
  <style>
    body {font-family: Tahoma; background:#f0f2f5; margin:0; padding:0; text-align:center;}
    h1{background:#007bff; color:#fff; padding:15px; margin:0;}
    button{margin:10px; padding:10px 20px; border:none; border-radius:8px; background:#007bff; color:#fff; cursor:pointer;}
    button:hover{background:#0056b3;}
    .section{display:none; padding:20px;}
    #sideEffects .sideEffect{margin:5px; padding:10px; background:#ffe0e0; border-radius:6px;}
    #aiChatBox{border:1px solid #ccc; height:200px; overflow-y:auto; padding:10px; background:#fff; text-align:right;}
    #bubbleContainer{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;overflow:hidden;}
    .bubble{position:absolute;bottom:-50px;border-radius:50%;background:rgba(0,150,255,0.3);animation:rise 8s infinite ease-in;}
    @keyframes rise{0%{transform:translateY(0);}100%{transform:translateY(-110vh);}}
    #adminPanel{display:none;background:#fff;border:2px solid #007bff;padding:15px;border-radius:10px;width:60%;margin:20px auto;}
    #adminContent{display:none;}
  </style>
</head>
<body onload="startBubbles()">

<h1>ğŸ’‰ Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªØ®Ø¯ÙŠØ± - Ø¨Ø¥Ø¯Ø§Ø±Ø© Ù…ØµØ·ÙÙ‰</h1>

<div>
  <button onclick="showSection('dose')">Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¬Ø±Ø¹Ø§Øª</button>
  <button onclick="showSection('fluids')">Ø§Ù„Ø³ÙˆØ§Ø¦Ù„ ÙˆØ§Ù„Ø¯Ù…</button>
  <button onclick="showSection('laryngo')">Ø§Ù„Ù„Ø§Ø±Ù†ØºÙˆØ³ÙƒÙˆØ¨</button>
  <button onclick="showSection('ai')">Ø´Ø§Øª AI</button>
  <button onclick="openAdminPanel()">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
</div>

<!-- Ù‚Ø³Ù… Ø§Ù„Ø¬Ø±Ø¹Ø§Øª -->
<div id="dose" class="section">
  <h2>Ø­Ø³Ø§Ø¨ Ø¬Ø±Ø¹Ø© Ø§Ù„ØªØ®Ø¯ÙŠØ±</h2>
  Ø§Ù„ÙˆØ²Ù†: <input type="number" id="weight"> ÙƒØº <br>
  Ø§Ù„Ø¹Ù…Ø±: <input type="number" id="age"> Ø³Ù†Ø© <br>
  Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆØ§Ø¡:
  <select id="drug"></select>
  <button onclick="calcDose()">Ø§Ø­Ø³Ø¨</button>
  <div id="doseResult"></div>
  <div id="sideEffects"></div>
</div>

<!-- Ù‚Ø³Ù… Ø§Ù„Ø³ÙˆØ§Ø¦Ù„ -->
<div id="fluids" class="section">
  <h2>Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³ÙˆØ§Ø¦Ù„ ÙˆØ§Ù„Ø¯Ù…</h2>
  Ø§Ù„ÙˆØ²Ù†: <input type="number" id="fWeight"> ÙƒØº <br>
  Ø§Ù„Ø¹Ù…Ø±: <input type="number" id="fAge"> Ø³Ù†Ø© <br>
  <button onclick="calcFluids()">Ø§Ø­Ø³Ø¨</button>
  <div id="fluidsResult"></div>
</div>

<!-- Ù‚Ø³Ù… Ø§Ù„Ù„Ø§Ø±Ù†ØºÙˆØ³ÙƒÙˆØ¨ -->
<div id="laryngo" class="section">
  <h2>ØªØ­Ø¯ÙŠØ¯ Ø­Ø¬Ù… Ø§Ù„Ù„Ø§Ø±Ù†ØºÙˆØ³ÙƒÙˆØ¨</h2>
  Ø§Ù„Ø¹Ù…Ø±: <input type="number" id="lAge"> Ø³Ù†Ø© <br>
  <button onclick="calcLaryngo()">Ø§Ø­Ø³Ø¨</button>
  <div id="laryngoResult"></div>
</div>

<!-- Ù‚Ø³Ù… Ø§Ù„Ø´Ø§Øª -->
<div id="ai" class="section">
  <h2>Ø´Ø§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</h2>
  <div id="aiChatBox"></div>
  <input type="text" id="aiInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ...">
  <button onclick="sendAIMessage()">Ø¥Ø±Ø³Ø§Ù„</button>
</div>

<!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
<div id="adminPanel">
  <h2>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
  ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: <input type="password" id="adminPassword">
  <button onclick="loginAdmin()">Ø¯Ø®ÙˆÙ„</button>
  <div id="adminContent">
    <h3>ØªØ¹Ø¯ÙŠÙ„ CSS</h3>
    <textarea id="customCSS" rows="4" cols="40"></textarea><br>
    <button onclick="applyCustomCSS()">ØªØ·Ø¨ÙŠÙ‚</button>
    <h3>ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø¯ÙˆÙŠØ©</h3>
    <textarea id="customDrugs" rows="6" cols="40"></textarea><br>
    <button onclick="applyCustomDrugs()">ØªØ·Ø¨ÙŠÙ‚</button>
  </div>
</div>

<div id="bubbleContainer"></div>

<script>
let drugsData = {
  "Ø¨Ø±ÙˆØ¨ÙˆÙÙˆÙ„": {dosePerKg:2, side:["Ù‡Ø¨ÙˆØ· Ø¶ØºØ·"], treatment:["Ø¥Ø¹Ø·Ø§Ø¡ Ø³ÙˆØ§Ø¦Ù„ + ÙØ§Ø²ÙˆØ¨Ø±Ø³ÙˆØ±"]},
  "Ù…ÙŠØ¯Ø§Ø²ÙˆÙ„Ø§Ù…": {dosePerKg:0.1, side:["ØªØ«Ø¨ÙŠØ· ØªÙ†ÙØ³"], treatment:["Ø£ÙˆÙƒØ³Ø¬ÙŠÙ† + ÙÙ„ÙˆÙ…Ø§Ø²ÙŠÙ†ÙŠÙ„"]},
  "ÙÙ†ØªØ§Ù†ÙŠÙ„": {dosePerKg:0.005, side:["Ø§ÙƒØªØ¦Ø§Ø¨ ØªÙ†ÙØ³ÙŠ"], treatment:["Ø£ÙˆÙƒØ³Ø¬ÙŠÙ† + Ù†Ø§Ù„ÙˆÙƒØ³ÙˆÙ†"]},
  "ÙƒÙŠØªØ§Ù…ÙŠÙ†": {dosePerKg:1.5, side:["Ù‡Ù„Ø§ÙˆØ³"], treatment:["Ù…Ù‡Ø¯Ø¦Ø§Øª Ø¨Ù†Ø²ÙˆØ¯ÙŠØ§Ø²Ø¨ÙŠÙ†"]}
};
window.onload = ()=>{
  startBubbles();
  let drugSelect=document.getElementById("drug");
  for(let d in drugsData){
    let option=document.createElement("option");
    option.value=d; option.innerText=d;
    drugSelect.appendChild(option);
  }
};

function showSection(id){
  document.querySelectorAll('.section').forEach(s=>s.style.display="none");
  document.getElementById(id).style.display="block";
}

function calcDose(){
  let w=parseFloat(document.getElementById('weight').value);
  let age=parseInt(document.getElementById('age').value);
  let drug=document.getElementById('drug').value;
  if(!w||!age||!drug){alert("Ø£Ø¯Ø®Ù„ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");return;}
  let dose=w*drugsData[drug].dosePerKg;
  document.getElementById('doseResult').innerHTML=`<h3>Ø§Ù„Ø¬Ø±Ø¹Ø©: ${dose.toFixed(2)} Ù…Ù„Øº</h3>`;
  let sideHTML="";
  for(let i=0;i<drugsData[drug].side.length;i++){
    sideHTML += `<div class="sideEffect"><b>${drugsData[drug].side[i]}</b>: ${drugsData[drug].treatment[i]}</div>`;
  }
  document.getElementById('sideEffects').innerHTML=sideHTML;
}

function calcFluids(){
  let w=parseFloat(document.getElementById('fWeight').value);
  let age=parseInt(document.getElementById('fAge').value);
  if(!w||!age){alert("Ø£Ø¯Ø®Ù„ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");return;}
  let fluids=w*30;
  let blood=w*70;
  document.getElementById('fluidsResult').innerHTML=
    `<h3>Ø§Ù„Ø³ÙˆØ§Ø¦Ù„: ${fluids} Ù…Ù„</h3><h3>Ø­Ø¬Ù… Ø§Ù„Ø¯Ù…: ${(blood/1000).toFixed(2)} Ù„ØªØ±</h3>`;
}

function calcLaryngo(){
  let age=parseInt(document.getElementById('lAge').value);
  if(!age && age!==0){alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù…Ø±");return;}
  let size="";
  if(age<1) size="0";
  else if(age<2) size="1";
  else if(age<5) size="2";
  else if(age<12) size="3";
  else size="4 (Ø¨Ø§Ù„Øº)";
  document.getElementById('laryngoResult').innerHTML=`<h3>Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨: ${size}</h3>`;
}

async function sendAIMessage(){
  const input=document.getElementById('aiInput').value;
  if(!input) return;
  const chatBox=document.getElementById('aiChatBox');
  const userMsg=document.createElement('p');
  userMsg.innerHTML="<b>Ø£Ù†Øª:</b> "+input;
  chatBox.appendChild(userMsg);
  const aiMsg=document.createElement('p');
  aiMsg.innerHTML="<b>Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ:</b> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±Ø¯...";
  chatBox.appendChild(aiMsg);
  chatBox.scrollTop=chatBox.scrollHeight;
  // Ù…Ø­Ø§ÙƒØ§Ø© Ø±Ø¯ AI
  setTimeout(()=>{aiMsg.innerHTML="<b>Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ:</b> Ù‡Ø°Ø§ Ø±Ø¯ ØªØ¬Ø±ÙŠØ¨ÙŠ. Ø§Ø±Ø¨Ø·Ù†ÙŠ Ø¨Ø¨Ø§Ùƒ Ø¥Ù†Ø¯ Ø­Ù‚ÙŠÙ‚ÙŠ Ù„Ø£Ø¬Ø§ÙˆØ¨ Ø¨Ø¯Ù‚Ø©.";},1000);
  document.getElementById('aiInput').value='';
}

function openAdminPanel(){ document.getElementById('adminPanel').style.display='block'; }
function loginAdmin(){
  let pw=document.getElementById('adminPassword').value;
  if(pw==="mustafa@2006#2"){
    document.getElementById('adminContent').style.display='block';
    alert("ØªÙ… Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…!");
  }else alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©!");
}

function applyCustomCSS(){
  let css=document.getElementById('customCSS').value;
  let styleTag=document.getElementById('dynamicStyle');
  if(!styleTag){ styleTag=document.createElement('style'); styleTag.id='dynamicStyle'; document.head.appendChild(styleTag);}
  styleTag.innerHTML=css;
  alert("ØªÙ… ØªØ·Ø¨ÙŠÙ‚ CSS");
}

function applyCustomDrugs(){
  let text=document.getElementById('customDrugs').value.trim();
  if(!text) return;
  drugsData={};
  document.getElementById("drug").innerHTML="";
  text.split("\n").forEach(line=>{
    let parts=line.split(",");
    if(parts.length>=4){
      drugsData[parts[0].trim()]={dosePerKg:parseFloat(parts[1]), side:[parts[2].trim()], treatment:[parts[3].trim()]};
      let option=document.createElement("option"); 
      option.value=parts[0].trim(); option.innerText=parts[0].trim();
      document.getElementById("drug").appendChild(option);
    }
  });
  alert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø¯ÙˆÙŠØ©!");
}

function startBubbles(){ 
  let container=document.getElementById('bubbleContainer'); 
  container.innerHTML='';
  for(let i=0;i<20;i++){
    let bubble=document.createElement('div'); 
    bubble.className='bubble';
    bubble.style.width=(10+Math.random()*20)+'px'; 
    bubble.style.height=bubble.style.width;
    bubble.style.left=Math.random()*100+'%';
    bubble.style.backgroundColor=`hsla(${Math.random()*360},70%,60%,0.5)`;
    bubble.style.animationDuration=(5+Math.random()*5)+'s';
    container.appendChild(bubble);
  }
}
</script>

</body>
</html>
